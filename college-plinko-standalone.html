<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>College Plinko - Two-Stage Gambling Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body {
        background-color: #1f2937;
        color: white;
        font-family: Arial, sans-serif;
      }

      .game-stage {
        display: none;
      }

      .game-stage.active {
        display: block;
      }
    </style>
  </head>

  <body>
    <div class="min-h-screen p-4">
      <div class="mx-auto max-w-4xl">
        <!-- Header -->
        <div class="mb-8 text-center">
          <h1 class="mb-4 text-4xl font-bold">College Plinko</h1>
          <p class="text-xl text-gray-300">Two-Stage Gambling Game</p>
        </div>

        <!-- Balance Display -->
        <div class="mb-6 rounded-lg bg-gray-800 p-4 text-center">
          <h2 class="mb-2 text-lg font-semibold">Your Balance</h2>
          <div class="text-3xl font-bold text-green-400" id="balance">$200.00</div>
        </div>

        <!-- Stage 1: Budget Gambling -->
        <div id="budget-gamble" class="game-stage active">
          <div class="rounded-lg bg-gray-900 p-8">
            <h2 class="mb-4 text-center text-2xl font-bold">Stage 1: Budget Gambling</h2>
            <p class="mb-6 text-center text-gray-300">Gamble your funds to get a college budget!</p>

            <div class="mx-auto max-w-md">
              <div class="mb-4">
                <label class="mb-2 block text-sm font-medium">Gamble Amount</label>
                <input
                  type="number"
                  id="gamble-amount"
                  value="10"
                  min="1"
                  class="w-full rounded-md border border-gray-600 bg-gray-700 px-3 py-2 text-white"
                />
              </div>

              <div class="mb-4 text-sm text-gray-300">
                <p>Potential budget range: <span id="budget-range">$1,000 - $30</span></p>
              </div>

              <button
                id="gamble-btn"
                class="w-full rounded-md bg-blue-600 px-4 py-3 font-bold text-white transition-colors hover:bg-blue-700"
              >
                Gamble for College Budget
              </button>
            </div>
          </div>
        </div>

        <!-- Stage 2: College Selection -->
        <div id="college-selection" class="game-stage">
          <div class="rounded-lg bg-gray-900 p-8">
            <h2 class="mb-4 text-center text-2xl font-bold">Stage 2: College Selection</h2>
            <p class="mb-6 text-center text-gray-300">
              Your budget: <span id="college-budget" class="font-bold text-green-400">$0</span>
            </p>

            <div class="mb-6">
              <h3 class="mb-3 text-lg font-semibold">Available Colleges</h3>
              <div id="colleges-list" class="grid max-h-64 gap-3 overflow-y-auto">
                <!-- Colleges will be populated here -->
              </div>
            </div>

            <div class="flex justify-center gap-4">
              <button
                id="back-btn"
                class="rounded-md bg-gray-600 px-6 py-3 font-bold text-white transition-colors hover:bg-gray-700"
              >
                Back to Budget Gambling
              </button>

              <button
                id="start-plinko-btn"
                class="rounded-md bg-blue-600 px-6 py-3 font-bold text-white transition-colors hover:bg-blue-700"
              >
                Start Plinko
              </button>
            </div>
          </div>
        </div>

        <!-- Stage 3: College Plinko -->
        <div id="college-plinko" class="game-stage">
          <div class="rounded-lg bg-gray-900 p-8">
            <h2 class="mb-4 text-center text-2xl font-bold">Stage 3: College Plinko</h2>
            <p class="mb-6 text-center text-gray-300">
              Target: <span id="target-college" class="font-bold text-blue-400">College</span>
            </p>

            <div class="mb-6 text-center">
              <p class="text-lg">Drop ONE ball to try to get into your chosen college!</p>
              <p class="mt-2 text-sm text-gray-400">
                This is a simplified version - the ball will randomly land in a college bin
              </p>
            </div>

            <div class="flex justify-center gap-4">
              <button
                id="drop-ball-btn"
                class="rounded-md bg-green-600 px-6 py-3 font-bold text-white transition-colors hover:bg-green-700"
              >
                Drop Ball
              </button>

              <button
                id="new-game-btn"
                class="rounded-md bg-gray-600 px-6 py-3 font-bold text-white transition-colors hover:bg-gray-700"
              >
                New Game
              </button>
            </div>

            <div id="result" class="mt-6 hidden text-center">
              <!-- Result will be shown here -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Game state
      let balance = 200;
      let collegeBudget = 0;
      let selectedCollege = null;
      let currentStage = 'budget-gamble';

      // College data
      const colleges = [
        { name: 'Harvard University', minBudget: 25000, prestige: 10 },
        { name: 'MIT', minBudget: 25000, prestige: 10 },
        { name: 'Princeton University', minBudget: 25000, prestige: 10 },
        { name: 'Rice University', minBudget: 100000, prestige: 9 },
        { name: 'UPenn', minBudget: 22000, prestige: 9 },
        { name: 'UChicago', minBudget: 22000, prestige: 9 },
        { name: 'UT Austin', minBudget: 15000, prestige: 7 },
        { name: 'Texas A&M', minBudget: 12000, prestige: 7 },
        { name: 'Community College', minBudget: 0, prestige: 1 },
      ];

      // Update display
      function updateBalance() {
        document.getElementById('balance').textContent = `$${balance.toFixed(2)}`;
      }

      function updateBudgetRange() {
        const gambleAmount = parseInt(document.getElementById('gamble-amount').value);
        const minBudget = Math.max(1000, gambleAmount * 0.5);
        const maxBudget = gambleAmount * 3;
        document.getElementById('budget-range').textContent =
          `$${minBudget.toLocaleString()} - $${maxBudget.toLocaleString()}`;
      }

      function showStage(stage) {
        document.querySelectorAll('.game-stage').forEach((el) => el.classList.remove('active'));
        document.getElementById(stage).classList.add('active');
        currentStage = stage;
      }

      function getAvailableColleges(budget) {
        return colleges.filter((college) => budget >= college.minBudget);
      }

      function populateColleges() {
        const availableColleges = getAvailableColleges(collegeBudget);
        const container = document.getElementById('colleges-list');
        container.innerHTML = '';

        availableColleges.forEach((college) => {
          const div = document.createElement('div');
          div.className =
            'p-4 rounded-lg border-2 border-gray-600 bg-gray-800 cursor-pointer hover:border-gray-500';
          div.innerHTML = `
                    <div class="flex justify-between items-center">
                        <div>
                            <h4 class="font-semibold text-white">${college.name}</h4>
                            <p class="text-sm text-gray-400">Min Budget: $${college.minBudget.toLocaleString()}</p>
                        </div>
                        <div class="text-right">
                            <div class="font-bold text-yellow-400">Prestige: ${college.prestige}/10</div>
                        </div>
                    </div>
                `;
          div.onclick = () => {
            selectedCollege = college;
            document
              .querySelectorAll('#colleges-list > div')
              .forEach((el) => el.classList.remove('border-blue-500', 'bg-blue-900/20'));
            div.classList.add('border-blue-500', 'bg-blue-900/20');
          };
          container.appendChild(div);
        });

        // Auto-select best college
        if (availableColleges.length > 0) {
          selectedCollege = availableColleges.reduce((best, current) =>
            current.prestige > best.prestige ? current : best,
          );
        }
      }

      // Event listeners
      document.getElementById('gamble-amount').addEventListener('input', updateBudgetRange);

      document.getElementById('gamble-btn').addEventListener('click', () => {
        const gambleAmount = parseInt(document.getElementById('gamble-amount').value);
        if (gambleAmount > balance || gambleAmount <= 0) return;

        // Generate random budget
        const minBudget = Math.max(1000, gambleAmount * 0.5);
        const maxBudget = gambleAmount * 3;
        collegeBudget = Math.floor(Math.random() * (maxBudget - minBudget + 1)) + minBudget;

        // Update balance
        balance -= gambleAmount;
        updateBalance();

        // Show college selection
        document.getElementById('college-budget').textContent =
          `$${collegeBudget.toLocaleString()}`;
        populateColleges();
        showStage('college-selection');
      });

      document.getElementById('back-btn').addEventListener('click', () => {
        showStage('budget-gamble');
      });

      document.getElementById('start-plinko-btn').addEventListener('click', () => {
        if (!selectedCollege) return;
        document.getElementById('target-college').textContent = selectedCollege.name;
        showStage('college-plinko');
      });

      document.getElementById('drop-ball-btn').addEventListener('click', () => {
        const availableColleges = getAvailableColleges(collegeBudget);
        const randomCollege =
          availableColleges[Math.floor(Math.random() * availableColleges.length)];

        const resultDiv = document.getElementById('result');
        resultDiv.classList.remove('hidden');

        if (randomCollege.name === selectedCollege.name) {
          resultDiv.innerHTML = `
                    <div class="bg-green-900 rounded-lg p-4">
                        <h3 class="text-green-400 font-bold mb-2">🎉 SUCCESS!</h3>
                        <p class="text-green-300">You got into ${selectedCollege.name}!</p>
                    </div>
                `;
        } else {
          resultDiv.innerHTML = `
                    <div class="bg-red-900 rounded-lg p-4">
                        <h3 class="text-red-400 font-bold mb-2">❌ FAILED</h3>
                        <p class="text-red-300">You got into ${randomCollege.name} instead of ${selectedCollege.name}</p>
                    </div>
                `;
        }
      });

      document.getElementById('new-game-btn').addEventListener('click', () => {
        collegeBudget = 0;
        selectedCollege = null;
        document.getElementById('result').classList.add('hidden');
        showStage('budget-gamble');
      });

      // Initialize
      updateBalance();
      updateBudgetRange();
    </script>
  </body>
</html>
